@page "/"

<PageTitle>Home</PageTitle>

<div class="grid grid-cols-2 gap-2 sm:grid-cols-3 md:grid-cols-4">
    @foreach (var pic in picsList)
    {
        <ItemCard Title="@pic.Substring(Math.Max(pic.Length - 15, 0))" Source="@pic" />
    }
</div>

@code {
    private List<string> picsList = new();

    protected override Task OnInitializedAsync()
    {
        DirectoryInfo d = new DirectoryInfo(@"wwwroot/images");
        FileInfo[] files = d.GetFiles();

        foreach (FileInfo filepath in files)
            picsList.Add("images/" + filepath.Name);

        return base.OnInitializedAsync();
    }

    protected override Task OnAfterRenderAsync(bool firstRender)
    {
        return base.OnAfterRenderAsync(firstRender);
    }
}